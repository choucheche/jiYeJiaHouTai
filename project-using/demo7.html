<html lang="en" class="no-js">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>

    <!--[if IE 8]>
    <html lang="en" class="ie8 no-js"> <![endif]-->
    <!--[if IE 9]>
    <html lang="en" class="ie9 no-js"> <![endif]-->
    <!--[if !IE]><!-->
    <!--<![endif]-->

    <meta charset="utf-8">
    <title>IC DEV PROFILE</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="static/media/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/style-metro.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/style.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/style-responsive.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/default.css" rel="stylesheet" type="text/css" id="style_color">
    <link href="static/media/css/uniform.default.css" rel="stylesheet" type="text/css">
    <!-- END GLOBAL MANDATORY STYLES -->

    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="static/media/css/jquery.gritter.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/daterangepicker.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/fullcalendar.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen">
    <link href="static/media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen">
    <!-- END PAGE LEVEL STYLES -->
    <link rel="shortcut icon" href="static/media/image/favicon.ico">

    <script src="static/media/usedJs/js/My97DatePicker/WdatePicker.js"></script>
    <link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://localhost:8080static/media/usedJs/layer/skin/default/layer.css?v=3.01172" id="layuicss-skinlayercss" style="">
    <link href="static/media/css/new-style.css" rel="stylesheet" type="text/css" />
    <!-- 新加的css -->
    <style type="text/css">
        .jqstooltip {
            position: absolute;
            left: 0px;
            top: 0px;
            visibility: hidden;
            background: rgb(0, 0, 0) transparent;
            background-color: rgba(0, 0, 0, 0.6);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
            color: white;
            font: 10px arial, san serif;
            text-align: left;
            white-space: nowrap;
            padding: 5px;
            border: 1px solid white;
            z-index: 10000;
        }

        .jqsfield {
            color: white;
            font: 10px arial, san serif;
            text-align: left;
        }
    </style>
    <link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
    <link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
</head>

<body style="background-color: white;">


    <!-- END HEAD -->

    <!-- BEGIN BODY -->


    <div class="row-fluid" style="margin-top:10px;">

        <div class="span12">
            <!-- BEGIN PAGE TITLE & BREADCRUMB-->
            <ol class="breadcrumb">
                <li>
                    <a href="index.html">积分管理</a>
                    <i class="icon-angle-right"></i>
                </li>
                <li>
                    <a href="rule/ruleList.do">积分规则列表</a>
                    <i class="icon-angle-right"></i>
                </li>
                <li>
                    <a href="#">新建积分规则</a>
                </li>
            </ol>

            <!-- END PAGE TITLE & BREADCRUMB-->
        </div>
    </div>

    <div class='body_wrap'>

        <div class="page-header">
            <h3>新建积分规则<small>Subtext for header</small></h3>
        </div>

        <div class="row-fluid">

            <div class="span12">

                <!-- BEGIN VALIDATION STATES-->


                <div class="portlet-body form portlet-form">

                    <!-- BEGIN FORM-->


                    <form action="#" id="saveForm" class="form-horizontal">

                        <div class="control-group">

                            <label class="control-label">有效时间<span class="required">*</span></label>

                            <div class="controls time_box">
                                <input name="pointRule.startTime" class="m-wrap span3 time" readonly="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd'})" type="text"> &nbsp;至&nbsp;
                                <input name="pointRule.endTime" class="m-wrap span3 time" readonly="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd'})" type="text">
                            </div>

                        </div>

                        <div class="control-group">
                            <label class="control-label">积分规则名称<span class="required">*</span></label>

                            <div class="controls">
                                <input name="pointRule.name" style='width:404px' data-required="1" class="span6 m-wrap" type="text">
                                <span for="name" class="help-inline ok"></span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">规则描述</label>

                            <div class="controls">
                                <textarea name="pointRule.remark" rows="5" cols="10" style="width:404px"></textarea>

                                <span for="name" class="help-inline ok"></span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">合作伙伴<span class="required">*</span></label>

                            <div class="controls">
                                <select id="selectPartenerId" class="span6 m-wrap" name="pointRule.partenerId">

                            <option value="2810">啊asdafads发</option>

                            <option value="2710">创建</option>

                            <option value="2610">你好你好你好</option>

                            <option value="2528">测试001</option>

                            <option value="2527">测</option>

                            <option value="2526">海航测试</option>

                            <option value="2524">《》？“：{}+——）（*&amp;</option>

                            <option value="2522">测试合作伙伴名称测试合作伙伴名称测试合作</option>

                            <option value="2515">海航</option>

                            <option value="2514">海航测试海航测试海航测试海航测试海航测试</option>

                            <option value="2513">海航</option>

                            <option value="2512">测试合作伙伴</option>

                            <option value="2511">测试合作伙伴</option>

                            <option value="2510">测试合作伙伴</option>

                            <option value="2414">水电费水电费等</option>

                            <option value="2413">合作伙伴6</option>

                            <option value="2412">合作伙伴6</option>

                            <option value="2411">水电费水电费水</option>

                            <option value="2410">亿美汇金信息技术股份有限公司</option>

                            <option value="2310">合作伙伴15</option>

                            <option value="2210">合作伙伴14</option>

                            <option value="2110">合作伙伴13</option>

                            <option value="2015">合作伙伴11</option>

                            <option value="2014">合作伙伴10</option>

                            <option value="2013">合作伙伴9</option>

                            <option value="2012">合作伙伴8</option>

                            <option value="2011">合作伙伴7</option>

                            <option value="2010">合作伙伴6</option>

                            <option value="1411">合作伙伴5</option>

                            <option value="1410">合作伙伴4</option>

                            <option value="211">合作伙伴3</option>

                            <option value="210">合作伙伴2</option>

                            <option value="110">合作伙伴133333</option>

                        </select>
                                <span for="name" class="help-inline ok"></span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">子积分池<span class="required">*</span></label>

                            <div class="controls">
                                <button type="button" onclick="selectPool()" class="btn green">选择积分池</button>

                                <span role="button" class="btn green" onclick="modal_box()">新选择积分池</span>
                                <script>
                                    function modal_box() {
                                        $('#myModal').modal('show');
                                    }
                                </script>

                                <span for="name" class="help-inline ok"></span>
                                <input style="display:none;" id="inputPoolId" name="pointRule.poolId">
                            </div>
                        </div>

                        <div class="controls" id="showSubPool">

                        </div>



                        <div class="control-group">
                            <label class="control-label">条件和奖励<span class="required">*</span></label>
                            <div class="form_div">
                                <label class="c">添加条件</label>
                                <div id="termDiv">
                                    <div class="controls">
                                        <span>

                            <select class="selectType select_110" onchange="typeChange()" name="listTerms[5].type">
                              <option value="TERM_TYPE_TRANTIME">交易时间</option>
                              <option value="TERM_TYPE_TRANMONEY">交易金额</option>
                              <option value="TERM_TYPE_BIRTHDAY">生日</option>
                            </select>
                            <select class="selectOp select_110" name="listTerms[5].op">
                              <option value="TERM_OP_GREATER">＞</option>
                              <option value="TERM_OP_LESS">＜</option>
                              <option value="TERM_OP_EQUAL">＝</option>
                              <option value="TERM_OP_GREATER_EQUAL">≥</option>
                              <option value="TERM_OP_LESS_EQUAL">≤</option>
                            </select>
                            <!--交易金额  -->
                            <input class="inputTranMoney input_110" style="width:100px;display:none;" type="text" placeholder="值">
                            <!--交易时间  -->
                            <input class="inputTranTime time" readonly="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd'})" type="text" name="listTerms[5].value">
                            <select class="selectBirthday select_110" style="display:none">
                              <option value="TERM_BIRTHDAY_DAY">当日</option>
                              <option value="TERM_BIRTHDAY_MONTH">当月</option>
                            </select>
                            <a class="btn purple" href="javascript:void(0);" id="deleteTerm" onclick="DeleteTerm();">删除</a>
                          </span>
                                    </div>

                                </div>
                                <div class="controls">
                                    <a class="btn blue" href="javascript:void(0);" onclick="addTerm();">增加交易时间条件</a>
                                </div>
                                <div class='dividing_line'></div>
                                <label>添加奖励</label>
                                <div class="controls controls_row">
                                    <label class="">奖励类型</label>
                                    <select name="movement.awardType" class="span6 m-wrap select_110">
                          <option value="MOVEMENT_AWARDTYPE_QUOTA">定额积分</option>
                          <option value="MOVEMENT_AWARDTYPE_MULTIPLE">倍数积分</option>
                        </select>
                                    <input name="movement.point" type="text" placeholder="值" class="m-wrap small input_110">
                                </div>
                                <div class='dividing_line'></div>
                                <label>积分过期</label>

                                <div class="controls controls_row">
                                    <div class="">
                                        <label class="">过期时间类型</label>
                                        <select id="expireType" onchange="expireChange()" name="movement.expireType" class="span6 m-wrap select_110">
                            <option value="MOVEMENT_EXPIRETYPE_FOREVER">永久有效</option>
                            <option value="MOVEMENT_EXPIRETYPE_APPOINT">指定有效时间</option>
                            <option value="MOVEMENT_EXPIRETYPE_COMPUTE">计算过期时间</option>
                          </select>
                                        <input id="expireTime" style="display:none" name="movement.expireTime" class="m-wrap span3 time" readonly="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd'})" type="text">

                                    </div>
                                    <div class="controls controls_row">
                                        <!--指定时间有效  -->

                                        <div style="display:none;" id="divComputeTime">
                                            <!--计算过期时间-->
                                            <label id="labelYXQ" class="">有效期：</label>
                                            <input id="computeTime" name="movement.computeTime" class="m-wrap span3 input_110" type="text">
                                            <select id="timeUnit" name="movement.timeUnit" class="span6 m-wrap select_110">

                                <option value="MOVEMENT_TIME_UNIT_DAY">日</option>

                                <option value="MOVEMENT_TIME_UNIT_MONTH">月</option>

                                <option value="MOVEMENT_TIME_UNIT_YEAR">年</option>

                            </select>
                                            <div class='clear_box'></div>
                                            <label id="labelCompute" class="">有效期计算方式：</label>
                                            <select id="accountType" name="movement.accountType" class="span6 m-wrap select_110">
                                <option value="MOVEMENT_ACCOUNT_TYPE_LAST">最后一天</option>
                                <option value="MOVEMENT_ACCOUNT_TYPE_COMPUTE">滚动计算</option>
                            </select>
                                            <input style="display:none;" class="input_110" value="POINTRULESTATUS_OPEN" name="pointRule.status">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" onclick="saveForm()" class="btn blue" style='margin-right:10px;'>保存</button>
                            <button type="button" class="btn gray cancel" onclick="Cancel()">取消</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="time_close" class="modal hide fade" data-name='time_close' tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close close_btn" data-dismiss="modal" aria-hidden="true"></button>
            <h3 id="myModalLabel">Modal header</h3>
        </div>
        <div class="modal-body">
            <span class='icon_bg error'></span>
            <p>One fine body…</p>
        </div>
        <div class="modal-footer">
            <button class="btn blue">保存</button>
            <button class="btn close_btn black" data-dismiss="modal" aria-hidden="true">关闭</button>
        </div>
    </div>
    <!-- 点击打开弹窗 -->

    <!-- Modal -->
    <div id="myModal" class="modal modal_big hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h3 id="myModalLabel">选择积分池</h3>
        </div>
        <div class="modal-body">
            <!-- <span class='icon_bg'></span>
        <span class='icon_bg'></span> -->
            <!-- <span class='icon_bg error'></span>
        <span class='icon_bg text'></span> -->
            <form action="/rule/ruleAdd.do" method="post" id="queryForm" class="form-horizontal modal_form">
                <div class="row-fluid">
                    <div class="span12">
                        <div class="portlet box light-grey" style="border:white;">
                            <div class="portlet-body">
                                <div class="tab-pane active" id="portlet_tab2">
                                    <div class="control-group">
                                      <span class='span_input input_110'>
                                        <label class="control-label">积分池编号</label>
                                        <input id="inputCode" name="code" type="text" class="m-wrap span3" style="float: left;width:180px;" value="">
                                      </span>
                                      <span class='span_input input_110'>
                                        <label class="control-label">积分池名称</label>
                                        <input id="inputName" name="name" type="text" class="m-wrap span3" style="float: left;width:180px;" value="">
                                      </span>
                                      <span class='span_input input_110'>
                                        <label style="width: 100px; padding-right: 10px;" class="control-label">创建人</label>
                                        <input id="inputCreateUser" name="createUser" type="text" class="m-wrap span3" style="float: left;width:180px;" value="">
                                      </span>
                                      <span class='span_input input_406 last_div'>
                                        <label style="width: 100px; padding-right: 10px;" class="control-label">创建时间</label>
                                        <input id="subPoolStartTime" name="subPoolStartTime" class="m-wrap span3 time" value="" readonly="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd'})" type="text"> &nbsp;至
                                        <input id="subPoolEndTime" name="subPoolEndTime" class="m-wrap span3 time" value="" readonly="" onclick="WdatePicker({dateFmt:'yyyy-MM-dd'})" type="text">
                                      </span>
                                      <div class="btn-group">
                                        <button type="button" onclick="btnSelectPool()" class="btn blue" style="margin-right: 10px;">
                                        	<i class="icon-search"></i> 搜索
                                        </button>
                                      </div>

                                </div>

                                </div>


                                <div id="selectPoolDiv" class="dataTables_wrapper form-inline" role="grid">










                                    <!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->

                                    <!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->

                                    <!--[if !IE]><!-->
                                    <!--<![endif]-->

                                    <!-- BEGIN HEAD -->



                                    <!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
                                    <!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
                                    <!--[if !IE]><!-->
                                    <!--<![endif]-->

                                    <meta charset="utf-8">
                                    <title>IC DEV PROFILE</title>
                                    <meta content="width=device-width, initial-scale=1.0" name="viewport">
                                    <meta content="" name="description">
                                    <meta content="" name="author">
                                    <!-- BEGIN GLOBAL MANDATORY STYLES -->
                                    <link href="/static/media/css/bootstrap.min.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/font-awesome.min.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/style-metro.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/style.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/style-responsive.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/default.css" rel="stylesheet" type="text/css" id="style_color">
                                    <link href="/static/media/css/uniform.default.css" rel="stylesheet" type="text/css">
                                    <!-- END GLOBAL MANDATORY STYLES -->

                                    <!-- BEGIN PAGE LEVEL STYLES -->
                                    <link href="/static/media/css/jquery.gritter.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/daterangepicker.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/fullcalendar.css" rel="stylesheet" type="text/css">
                                    <link href="/static/media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen">
                                    <link href="/static/media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen">
                                    <!-- END PAGE LEVEL STYLES -->
                                    <link rel="shortcut icon" href="/static/media/image/favicon.ico">

                                    <script src="/static/media/usedJs/js/My97DatePicker/WdatePicker.js"></script>




                                    <!-- END HEAD -->

                                    <!-- BEGIN BODY -->




                                    <table class="table table-striped table-bordered table-hover dataTable" id="tableSelectPool" aria-describedby="sample_1_info">
                                        <thead>
                                            <tr role="row">
                                                <th style="width:30px;"></th>
                                                <th style="width:90px;">积分池编号</th>
                                                <th style="width:90px;">积分池名称</th>
                                                <th style="width:70px;">创建人</th>
                                                <th style="width:80px;">创建时间</th>
                                            </tr>
                                        </thead>

                                        <tbody role="alert" aria-live="polite" aria-relevant="all">

                                            <tr class="gradeX odd">
                                                <td><input value="1916" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001916</td>
                                                <td>12345678901234567890</td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-22</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1913" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001913</td>
                                                <td>子池1</td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-22</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1912" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001912</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-22</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1911" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001911</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-22</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1910" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001910</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-22</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1814" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001814</td>
                                                <td>1</td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-21</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1813" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001813</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-21</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1812" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001812</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-21</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1811" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001811</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-21</td>
                                            </tr>

                                            <tr class="gradeX odd">
                                                <td><input value="1810" name="tdSelectPoolId" type="radio"></td>
                                                <td>S001810</td>
                                                <td></td>
                                                <td class="hidden-480 ">99</td>
                                                <td>2017-02-21</td>
                                            </tr>

                                        </tbody>
                                    </table>

                                    <div class="row-fluid">
                                        <div class="span6" style="width: 100%;">
                                            <div class="dataTables_paginate paging_bootstrap pagination" style="margin: 0px;float: right;">
                                                <ul id="page_div"><input type="hidden" id="pageNum" name="pageNum" value="1">
                                                    <li class="prev disabled"><span class="hidden-480">上一页</span></li>
                                                    <li class="active"><span class="hidden-480">1</span></li>
                                                    <li class="next disabled"><span class="hidden-480">下一页</span></li><select id="pageSize" name="pageSize" style="width: 60px; margin-left: -1px;" onchange="changeCount();"><option value="10" selected="">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option></select>
                                                    <li
                                                        style="float: right;"><span class="hidden-480">共 10 条</span></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <script type="text/javascript">
                                        // 换页函数
                                        function nextPage(page) {
                                            $("#pageNum").val(page);
                                            loadInfo(, '');
                                        }

                                        // 调整每页显示条数
                                        function changeCount() {
                                            loadInfo(, '');
                                        }
                                    </script>


                                </div>
                                <!-- <div class="form-actions">
                                    <button type="button" onclick="savePool()" class="btn red">保存</button>
                                    <button type="button" class="btn gray" onclick="closePool()">取消</button>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn blue" type="button" onclick="savePool()">保存</button>
            <button class="btn black" type="button" data-dismiss="modal" aria-hidden="true" onclick="closePool()">关闭</button>
        </div>
    </div>

    <!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

    <!-- BEGIN CORE PLUGINS -->
    <script src="static/media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
    <script src="static/media/usedJs/js/jquery-2.0.3.min.js" type="text/javascript"></script>

    <script src="static/media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

    <!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

    <script src="static/media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>

    <script src="static/media/js/bootstrap.min.js" type="text/javascript"></script>

    <!--[if lt IE 9]>

<script src="static/media/js/excanvas.min.js"></script>

<script src="static/media/js/respond.min.js"></script>

<![endif]-->

    <script src="static/media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.blockui.min.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.cookie.min.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.uniform.min.js" type="text/javascript"></script>

    <!-- END CORE PLUGINS -->

    <!-- BEGIN PAGE LEVEL PLUGINS -->


    <script src="static/media/js/jquery.flot.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.flot.resize.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.pulsate.min.js" type="text/javascript"></script>

    <script src="static/media/js/date.js" type="text/javascript"></script>

    <script src="static/media/js/daterangepicker.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.gritter.js" type="text/javascript"></script>

    <script src="static/media/js/fullcalendar.min.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.easy-pie-chart.js" type="text/javascript"></script>

    <script src="static/media/js/jquery.sparkline.min.js" type="text/javascript"></script>

    <!-- END PAGE LEVEL PLUGINS -->

    <!-- BEGIN PAGE LEVEL SCRIPTS -->

    <script src="static/media/js/app.js" type="text/javascript"></script>

    <script src="static/media/js/index.js" type="text/javascript"></script>

    <script src="static/media/usedJs/js/blockUI.min.js"></script>
    <script src="static/media/usedJs/js/jquery.form.js"></script>
    <script src="static/media/usedJs/js/validation.js"></script>
    <script src="static/media/usedJs/js/main.controller.js"></script>

    <script src="static/media/usedJs/layer/layer.js"></script>
    <script src="static/media/usedJs/js/layerCommon/layerCommon.js"></script>
    <!-- END PAGE LEVEL SCRIPTS -->
    <script>
        //    jQuery(document).ready(function() {

        App.init(); // initlayout and core plugins

        Index.init();

        Index.initJQVMAP(); // init index page's custom scripts

        Index.initCalendar(); // init index page's custom scripts

        Index.initCharts(); // init index page's custom scripts

        Index.initChat();

        Index.initMiniCharts();

        Index.initDashboardDaterange();

        Index.initIntro();

        //    });
    </script>


    <script type="text/javascript">
        //控制条件的选择，显示操作
        function typeChange() {
            for (var i = 0; i < $(".selectType").length; i++) {
                $(".selectType")[i].name = "listTerms[" + i + "].type";
                $(".selectType")[i].id = "type" + i;

                //给所有的付id
                $(".selectOp")[i].id = "op" + i; //操作符
                $(".inputTranTime")[i].id = "tranTime" + i; //交易时间
                $(".inputTranMoney")[i].id = "tranMoney" + i; //交易金额
                $(".selectBirthday")[i].id = "birthday" + i; //生日

                var selectValue = $('#' + $(".selectType")[i].id + ' option:selected').val(); //选中的值
                if (selectValue == 'TERM_TYPE_TRANMONEY') { //如果选中的是交易金额
                    $(".selectOp")[i].name = "listTerms[" + i + "].op";
                    $('#' + $(".selectOp")[i].id).show(); //显示操作符

                    $(".inputTranMoney")[i].name = "listTerms[" + i + "].value";
                    $('#' + $(".inputTranMoney")[i].id).show(); //显示金额添加值

                    //是否隐藏交易时间和生日
                    $('#' + $(".inputTranTime")[i].id).hide();
                    $('#' + $(".selectBirthday")[i].id).hide();
                    //同时将name去掉
                    $(".inputTranTime")[i].name = "";
                    $(".selectBirthday")[i].name = "";
                } else if (selectValue == 'TERM_TYPE_TRANTIME') { //如果选中的是交易时间
                    $(".selectOp")[i].name = "listTerms[" + i + "].op";
                    $('#' + $(".selectOp")[i].id).show(); //显示操作符

                    $(".inputTranTime")[i].name = "listTerms[" + i + "].value";
                    $('#' + $(".inputTranTime")[i].id).show(); //显示交易时间添加值

                    //隐藏生日和交易金额
                    $('#' + $(".inputTranMoney")[i].id).hide();
                    $('#' + $(".selectBirthday")[i].id).hide();
                    //同时将name去掉
                    $(".inputTranMoney")[i].name = "";
                    $(".selectBirthday")[i].name = "";
                } else { //如果选中的是生日
                    $(".selectBirthday")[i].name = "listTerms[" + i + "].value";
                    $('#' + $(".selectBirthday")[i].id).show(); //显示生日添加值

                    //隐藏操作符、交易时间和交易金额
                    $('#' + $(".inputTranMoney")[i].id).hide();
                    $('#' + $(".selectOp")[i].id).hide();
                    $('#' + $(".inputTranTime")[i].id).hide();
                    //同时将name去掉
                    $(".inputTranMoney")[i].name = "";
                    $(".selectOp")[i].name = "";
                    $(".inputTranTime")[i].name = "";
                }
            }
        }

        //控制过期时间的选择，显示操作
        function expireChange() {
            var selectValue = $('#expireType option:selected').val(); //选中的值
            if (selectValue == 'MOVEMENT_EXPIRETYPE_APPOINT') { //如果选中的是“指定有效时间”
                $(divComputeTime).hide();
                $(expireTime).show();
            } else if (selectValue == 'MOVEMENT_EXPIRETYPE_COMPUTE') { //如果选中的是“计算过期时间”
                $(divComputeTime).show();
                $(expireTime).hide();
            } else { //如果选中的是“永久有效”
                $(divComputeTime).hide();
                $(expireTime).hide();
            }
        }

        //选择积分池弹出框
        function selectPool() {
            //得到选中文本的值
            var partenerId = $('#selectPartenerId option:selected').val(); //选中的值
            //调用后台查看子积分池的方法
            $.ajax({
                type: 'POST',
                contentType: 'application/json',
                url: "rule/showSelectPool.do",
                dataType: 'html',
                async: false,
                success: function(data) {
                    openIndex = layer.open({
                        type: 1,
                        skin: 'layui-layer-rim', //加上边框
                        area: ['1000px', '400px'], //宽高
                        title: '选择积分池',
                        content: data,
                    });
                },
                error: function() {
                    alert("失败!")
                }
            })
        }

        //保存
        function saveForm() {
            requestFormByValidation(
                jQuery("#saveForm")[0],
                "rule/saveRule.do",
                "json",
                true,
                function(data) {
                    if (data.code == "SUCCESS") {
                        layerMsg("保存成功", 1000);
                        requestForHtmlByLoadAddress("rule/ruleList.do");
                    } else {
                        layerMsg("保存失败", 3000);
                    }
                }, null);
        }

        //取消
        function Cancel() {
            window.location.href = "rule/ruleList.do";
        }

        //添加条件界面
        function addTerm() {
            var parentDom = $('#termDiv'),
                oriDom = parentDom.children(":first");
            var nowDom = oriDom.clone();
            parentDom.append(nowDom);

            for (var i = 0; i < $(".selectType").length; i++) {
                $(".selectType")[i].name = "listTerms[" + i + "].type";
                $(".selectOp")[i].name = "listTerms[" + i + "].op";
                $(".inputTranTime")[i].name = "listTerms[" + i + "].value";
            }
        }

        //删除条件
        function DeleteTerm() {
            /* if($(".selectType").length>1){ */
            $(deleteTerm).parent().parent().remove();
            typeChange();
            /* }else{
             //提示不能删除

             } */
        }

        //页面加载
        window.onload = function() {
            for (var i = 0; i < $(".selectType").length; i++) {
                $(".selectType")[i].name = "listTerms[" + i + "].type";
                $(".selectOp")[i].name = "listTerms[" + i + "].op";
                $(".inputTranTime")[i].name = "listTerms[" + i + "].value";
            }
        }


        function closePool() {
            layer.closeAll();
        }

        //保存
        function savePool() {
            var tdPoolId = $("input[name='tdSelectPoolId']:checked").val();
            $(inputPoolId).value = tdPoolId;
            $.ajax({
                type: 'POST',
                contentType: 'application/json',
                url: "rule/selectSubPool.do",
                data: "subPoolId=" + tdPoolId,
                async: false,
                dataType: 'html',
                success: function(data) {
                    $('#showSubPool').html(data);
                    layer.closeAll();
                },
                error: function() {
                    alert("失败!")
                }
            })
        }
    </script>
    <span class="layui-layer-setwin"><a class="layui-layer-ico layui-layer-close layui-layer-close1"
                                    href="javascript:;"></a></span><span class="layui-layer-resize"></span>

    <div class="layui-layer-move"></div>
    <script>
      $(function(){
        $('.modal_big div.radio input[type=radio]').click(function(){
          $('.modal_big .table td.chose_this').removeClass('chose_this');
          $(this).parentsUntil("tbody").find('td').addClass('chose_this');
        })
      })

    </script>
</body>

</html>
