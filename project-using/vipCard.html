<html lang="en" class="no-js"><!--<![endif]--><!-- BEGIN HEAD --><head>

    <!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
    <!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
    <!--[if !IE]><!--> <!--<![endif]-->

    <meta charset="utf-8">
    <title>IC DEV PROFILE</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="static/media/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/style-metro.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/style.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/style-responsive.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/default.css" rel="stylesheet" type="text/css" id="style_color">
    <link href="static/media/css/uniform.default.css" rel="stylesheet" type="text/css">
    <!-- END GLOBAL MANDATORY STYLES -->

    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="static/media/css/jquery.gritter.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/daterangepicker.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/fullcalendar.css" rel="stylesheet" type="text/css">
    <link href="static/media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen">
    <link href="static/media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen">
    <!-- END PAGE LEVEL STYLES -->
    <link rel="shortcut icon" href="static/media/image/favicon.ico">

    <script src="static/media/usedJs/js/My97DatePicker/WdatePicker.js"></script><link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="http://192.168.1.251:8012static/media/usedJs/layer/skin/default/layer.css?v=3.01172" id="layuicss-skinlayercss"><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style><link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css"><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style><link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css"><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style><link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css"><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style><link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css"><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style><link href="static/media/usedJs/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css"><style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style>
    <link href="static/media/css/new-style.css" rel="stylesheet" type="text/css"/>
    <link href="static/media/css/jiyejia.css" rel="stylesheet" type="text/css"/>
    <!-- 新加的css -->
    </head>
<body style="background-color: white;">
<!-- END HEAD -->
<!-- BEGIN BODY -->
<ol class="breadcrumb">
  <li>
      <a href="index.html">会员卡修改</a>
  </li>
  <!-- <li>
      <a href="#">合作伙伴列表</a>
      <i class="icon-angle-right"></i>
  </li>
  <li>
      <a href="#">会员卡修改</a>
  </li> -->
</ol>
<div class='body_wrap'>
  <div class="row-fluid">
      <div class="span12">
        <div class="page-header">
          <h3>会员卡修改</h3>
          <div class='btn orange'>已投放</div>
        </div>
      </div>
  </div>


  <div class="row-fluid top-portletBox">

    <div class="span12">
    <!-- BEGIN INLINE TABS PORTLET-->

      <div class='previewBox'>
            <div class='previewTitle'>预览效果</div>
            <div class='modelBox'>
            <!-- <div class='modelBox colorBox' style='background:#f48c33'> -->
              <div class='phoneTop'>
                <div class='signal'>
                  <div class='circleBox'>
                    <span class='full'></span>
                    <span class='full'></span>
                    <span class='full'></span>
                    <span></span>
                    <span></span>
                  </div>
                  <div class='text'>
                    EVA
                  </div>
                  <div class='wifiIcon'></div>
                </div>
                <div class='timeBox'>
                  <span>16:26 PM</span>
                </div>
                <div class='rightBox'>
                  <div class='batteryIcon'></div>
                  <div class='num'>77%</div>
                  <div class="bluetoothIcon"></div>
                </div>
              </div>
              <div class='cardBox'>
                <div class='cardHead'>
                  <div class='cardLogo'>
                    <!-- <img src=''> -->
                  </div>
                  <dl>
                    <dt>吉野家</dt>
                    <dd>会员卡</dd>
                  </dl>
                  <div class='QRcode'>
                    <img src='static/media/image/jiyejia/erweima.jpg'>
                  </div>
                </div>
                <div class='codeNum'>0268 8888 8888</div>
              </div>
              <ul>
                <li>会员卡详情</li>
                <li>公众号</li>
                <li>自定义入口（选填）</li>
                <li>自定义入口（选填）</li>
                <li>自定义入口（选填）</li>
              </ul>
          </div>
      </div>
      <div class='optionsBox span7'>
        <div class='optionsTitle'>内容设置</div>
        <form class='optionsForm'>
          <div class='box'>
            <label class='labelText'>基本信息</label>
          </div>
          <div class='box'>
            <label class='labelText'><span>*</span>卡券封面</label>
            <div class='controls controlsMin' id='imgOrColor'>
              <label class="radio" data-type='imageWrap'>
                <input type="radio" name="optionsRadios1" value="option1" checked  >
                图片
              </label>
              <label class="radio" data-type='colorWrap'>
                <input type="radio" name="optionsRadios1" value="option2" >
                颜色
              </label>
            </div>
            <div id='imgOrColorWrap'>
              <div class='controls imageWrap' id='imageWrap'>
                <a href="javascript:;" class="btn orange file">上传文件
                  <input type="file" name="" id='upBgImg' accept="image/png,image/jpeg">
                  <!-- accept 只能上传 png，jpeg，jpg -->
                </a>
                <div class='afterText'>图片要求：1000*600像素   小于1M PNG、JPG 、JPNG</div>
              </div>
              <div class='controls controlsMin colorWrap' id='colorWrap' style='display:none;'>
                <ul class='colorBox' data-color='#63b359'></li>
                  <li style='background:#2c9f67' data-color='#2c9f67'></li>
                  <li style='background:#509fc9' data-color='#509fc9'></li>
                  <li style='background:#5885cf' data-color='#5885cf'></li>
                  <li style='background:#9062c0' data-color='#9062c0'></li>
                  <li style='background:#d09a45' data-color='#d09a45'></li>
                  <li style='background:#e4b138' data-color='#e4b138'></li>
                  <li style='background:#ee903c' data-color='#ee903c'><span><i class="icon-ok"></i></span></li>
                  <li style='background:#f08500' data-color='#f08500'></li>
                  <li style='background:#dd6549' data-color='#dd6549'></li>
                  <li style='background:#cc463d' data-color='#cc463d'></li>
                  <li style='background:#cf3e36' data-color='#cf3e36'></li>
                  <li style='background:#5e6671' data-color='#5e6671'></li>
                </ul>
              </div>

            </div>
            <div class='errorState errorState1'>

            </div>
          </div>
          <div class='box'>
            <label class='labelText'>商户LOGO</label>
            <div class='controls controlsMin'>
              <a href="javascript:;" class="btn orange file">上传logo
                <input type="file" name="" id="upLogoImg" accept="image/png,image/jpeg">
              </a>
            </div>
            <div class='errorState errorState2'>

            </div>
          </div>
          <img id='localImag'>
          <div class='box'>
            <label class='labelText'><span>*</span>会员卡名称</label>
            <div class='controls'>
              <input type='text' id='textNum9' maxlength="9">
            </div>
          </div>
          <div class='box'>
            <label class='labelText'>会员卡详情</label>
          </div>
          <div class='box'>
            <label class='labelText'>享受折扣</label>
            <div class='controls controlsMin'>
              <input class='shortInput' type='text'>
              <div class='afterText'>折<span class='grayText'>请填写0.1-9.9之间的数字，不填则没有折扣</span></div>
            </div>
          </div>
          <div class='box textareaNum'>
            <label class='labelText'><span>*</span>特权说明</label>
            <div class='controls controlsMin'>
              <textarea id='textNum100' placeholder="例如：1.全场通用 2.过期无效" maxlength="100"></textarea>
            </div>
          </div>
          <div class='box'>
            <label class='labelText'><span>*</span>使用须知</label>
            <div class='controls controlsMin'>
              <textarea class='long' placeholder="例如：1.全场通用 2.过期无效"></textarea>
            </div>
          </div>
          <div class='box'>
            <label class='labelText'><span>*</span>商户电话</label>
            <div class='controls controlsMin'>
              <input type='text' class='center' placeholder="手机或固话">
            </div>
          </div>
          <div class='btn orange' id='addEntrance'>+添加自定义入口</div>
          <div id='EntranceBox'>
            <div class='box'>
              <label class='labelText'>入口一</label>
            </div>
            <div class='box'>
              <label class='labelText'>入口名称</label>
              <div class='controls controlsMin'>
                <input type='text'>
              </div>
            </div>
            <div class='box'>
              <label class='labelText'>网页链接</label>
              <div class='controls controlsMin'>
                <input type='text'>
              </div>
            </div>
          </div>
          <div class='box'>
            <label class='labelText'></label>
            <div class='controls btnBox'>
              <div class='btn orange'>保存并投放</div>
              <div class='btn orange'>保存</div>
              <div class='btn grayBtn'>取消</div>
            </div>
          </div>
        </form>
      </div>
  </div>
</div>



<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

<!-- BEGIN CORE PLUGINS -->
<script src="static/media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
<script src="static/media/usedJs/js/jquery-2.0.3.min.js" type="text/javascript"></script>

<script src="static/media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

<script src="static/media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>

<script src="static/media/js/bootstrap.min.js" type="text/javascript"></script>

<!--[if lt IE 9]>

<script src="static/media/js/excanvas.min.js"></script>

<script src="static/media/js/respond.min.js"></script>

<![endif]-->
<script src="static/media/js/jquery.charactercounter.js"></script>
<!-- input,textarea文字还能输入多少提示 -->
<script src="static/media/js/img.js"></script>
<!-- 图片上传预览 -->
<script>
$(function(){
  /*初始化卡片的背景图，logo图，会员卡名*/
  //logo
  var cardLogoDefault = 'static/media/image/jiyejia/baidu.jpg';
  $('.body_wrap .modelBox .cardBox .cardHead .cardLogo').css('background-image','url('+cardLogoDefault+')');

  //bg
  var cardBgDefault = 'static/media/image/jiyejia/cardBg.jpg';
  $('.body_wrap .modelBox .cardBox').css({'background':'url('+cardBgDefault+')','background-size':'100% 100%'});

  //会员卡名
  var cardNameDefault = '吉野家店铺';
  $('.body_wrap .modelBox .cardBox .cardHead dl dt').text(cardNameDefault);

  /*初始化卡片的背景图，logo图，会员卡名 结束*/

  /*切换图片和颜色 单选按钮 radio*/
  $(document).on('click','#imgOrColor label.radio',function(){
    if(!$(this).find('input').is(':checked')){
      var thisType = '.' + $(this).parent().attr('data-type');
      console.log(thisType);
      $('#imgOrColorWrap').find(thisType).show().siblings().hide();
    }
  });
  /*切换图片和颜色 单选按钮 radio 结束*/

  /*选择会员卡颜色*/
  $('.body_wrap .optionsBox .optionsForm .controls .colorBox li').click(function(){
    $(this).append('<span><i class="icon-ok"></i></span>');
    $(this).siblings().html('');
    var thisColor = $(this).attr('data-color');
    $('.body_wrap .modelBox .cardBox').css('background',thisColor);
  });
  /*选择颜色结束*/

  /*input和textarea的文字还能输入多少提示 特效*/
  $('#textNum9').characterCounter(9);
  $('#textNum100').characterCounter(100);
  /*input和textarea的文字还能输入多少提示 特效 结束*/

  /*添加自定义入口*/
  $('#addEntrance').click(function(){
    $('#EntranceBox').append('<div class="box"><label class="labelText">入口一</label></div><div class="box"><label class="labelText">入口名称</label><div class="controls controlsMin"><input type="text"></div></div><div class="box"><label class="labelText">网页链接</label><div class="controls controlsMin"><input type="text"></div></div>')
  });
  /*添加自定义入口结束*/

  /*预览商户logo*/
  var $upLogoImg = document.getElementById("upLogoImg");
  var $cardLogo = $('.cardLogo');
  $('#upLogoImg').bind('change',function(){
    selectImg($upLogoImg,$cardLogo);
    console.log('1');
		//var cardLogoUrl = getFileUrl(this);
    //需要 img.js 的 JS 文件，用于预览上传图片
    //console.log(cardLogoUrl);
    //$cardLogo.css('background','url('+cardLogoUrl+')');
	});
  /*预览商户logo 结束*/

  /*商户卡片背景图预览*/
  var $upBgImg = document.getElementById("upBgImg");
  var $cardBg = $('.body_wrap .modelBox .cardBox');
  $('#upBgImg').bind('change',function(){
    console.log('1');
    selectImg($upBgImg,$cardBg);
    //var cardBgUrl = getFileUrl(this);
    //需要 img.js 的 JS 文件，用于预览上传图片
    //console.log(cardBgUrl);
    //$cardBg.css('background','url('+cardBgUrl+')');
  });
  /*商户卡片背景图预览 结束*/

  /*判断用户上传图片大小*/
  function selectImg(upImg,cardImg){
    var filename = upImg.value;
    //console.log(filename);
    var mime = filename.toLowerCase().substr(filename.lastIndexOf("."));
    //console.log(mime);
    var file_size = upImg.files[0].size;
    //console.log(file_size);
    if((mime==".jpg"||mime==".png"||mime==".jpng")&&file_size<'1048576'){
      //1048576等于 1m 大小
      setImagePreview(upImg,cardImg);
    }else{
      upImg.value ='';
      if(mime==".jpg"||mime==".png"||mime==".jpng"){
          error_file_status = '上传的文件太大';
      }else{
          error_file_status = '上传的文件格式错误';
      }
      if(upImg.id=='upBgImg'){
        $('.errorState1').show().text(error_file_status);
      }else if(upImg.id=='upLogoImg'){
        $('.errorState2').show().text(error_file_status);
      }
    }
  };
  function setImagePreview(docObj,imgObjPreview){
    if(docObj.files &&docObj.files[0]){
      //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式
      imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
    }else{
      //IE下，使用滤镜
      docObj.select();
      var imgSrc = document.selection.createRange().text;
      var localImagId = document.getElementById("localImag");
      //必须设置初始大小
      localImagId.style.width = "158px";
      //localImagId.style.height = "100px";
      //图片异常的捕捉，防止用户修改后缀来伪造图片
      try{
        localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
        localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
      }
      catch(e){
        alert("您上传的图片格式不正确，请重新选择!");
        return false;
      }
      imgObjPreview.style.display = 'none';
      document.selection.empty();
      }

      var img_url = imgObjPreview.src;
      if(docObj.id=='upLogoImg'){
        //console.log('3');
        $cardLogo.css('background-image','url('+img_url+')');
        $('.errorState2').hide();
      }else if(docObj.id=='upBgImg'){
        console.log('4');
        $cardBg.css({'background':'url('+img_url+')','background-size':'100% 100%'});
        $('.errorState1').hide();
      }
    }
  /*判断用户上传图片大小 结束*/

  /*会员卡名*/
  $('#textNum9').bind('change',function(){
    var vipCardName = $('#textNum9').val();
    console.log(vipCardName);
    $('.body_wrap .modelBox .cardBox .cardHead dl dt').text(vipCardName);
  })
  /*会员卡名 结束*/
  })
</script>

<script src="static/media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

<script src="static/media/js/jquery.blockui.min.js" type="text/javascript"></script>

<script src="static/media/js/jquery.cookie.min.js" type="text/javascript"></script>

<script src="static/media/js/jquery.uniform.min.js" type="text/javascript"></script>

<!-- END CORE PLUGINS -->

<!-- BEGIN PAGE LEVEL PLUGINS -->

<script src="static/media/js/jquery.flot.js" type="text/javascript"></script>

<script src="static/media/js/jquery.flot.resize.js" type="text/javascript"></script>

<script src="static/media/js/jquery.pulsate.min.js" type="text/javascript"></script>

<script src="static/media/js/date.js" type="text/javascript"></script>

<script src="static/media/js/daterangepicker.js" type="text/javascript"></script>

<script src="static/media/js/jquery.gritter.js" type="text/javascript"></script>

<script src="static/media/js/fullcalendar.min.js" type="text/javascript"></script>

<script src="static/media/js/jquery.easy-pie-chart.js" type="text/javascript"></script>

<script src="static/media/js/jquery.sparkline.min.js" type="text/javascript"></script>

<!-- END PAGE LEVEL PLUGINS -->

<!-- BEGIN PAGE LEVEL SCRIPTS -->

<script src="static/media/js/app.js" type="text/javascript"></script>

<script src="static/media/js/index.js" type="text/javascript"></script>

<script src="static/media/usedJs/js/blockUI.min.js"></script>
<script src="static/media/usedJs/js/jquery.form.js"></script>
<script src="static/media/usedJs/js/validation.js"></script>
<script src="static/media/usedJs/js/main.controller.js"></script>

<script src="static/media/usedJs/layer/layer.js"></script>
<script src="static/media/usedJs/js/layerCommon/layerCommon.js"></script>
<!-- END PAGE LEVEL SCRIPTS -->



<script>
    jQuery(document).ready(function() {

        App.init(); // initlayout and core plugins

        Index.init();

        Index.initJQVMAP(); // init index page's custom scripts

        Index.initCalendar(); // init index page's custom scripts

        Index.initCharts(); // init index page's custom scripts

        Index.initChat();

        Index.initMiniCharts();

        Index.initDashboardDaterange();

        Index.initIntro();

    });

</script>




<script type="text/javascript">
    $(function () {
        loadInfo(1,1);
    });
    //加载tab信息
    function loadInfo(flag,tab){
        var url;
        if(flag == 1){
            url = "/partner/loadMemberInfo.do";
        }
        else if(flag == 2){
            url = "/partner/loadIntegralPoolInfo.do";
        }
        else if(flag == 3){
            url = "/partner/loadIntegralBehaviorInfo.do";
        }
        else if(flag == 4){
            url = "/partner/loadIntegralRuleInfo.do";
        }
        if(tab == 1 ){
            $("#pageNum").val(1);
            $("#pageSize").val(10);
        }
        var paramData = {
            'flag': flag,
            'partnerId': $("#partnerId").val(),
            'pageNum': $("#pageNum").val()==undefined?0:$("#pageNum").val(),
            'pageSize': $("#pageSize").val()==undefined?10:$("#pageSize").val()
        };

        $.ajax({
            type: "post",
            contentType: 'application/json',
            url: url,
            async: false,
            data: JSON.stringify(paramData),
            dataType: 'html',
            success: function (data) {
                $("#tab_1_1").html("");
                $("#tab_1_2").html("");
                $("#tab_1_3").html("");
                $("#tab_1_4").html("");
                $("#tab_1_"+flag).html(data);
            },
            error: function () {
                layerAlert("系统错误","提示",5);
            }
        });
    }

</script>



</body></html>
